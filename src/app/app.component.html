<div class="mat-fab">
  <button class="minifab" mat-mini-fab color="accent">
    <b>{{ this.currentCart.totalItems }}</b>
  </button>
  <button
    class="minifabempty"
    mat-mini-fab
    mat-mini-fab
    color="accent"
    (click)="cleanCartEvent()"
    [disabled]="this.currentCart.items.length == 0"
  >
    <mat-icon>remove_shopping_cart</mat-icon>
  </button>
  <button (click)="this.drawer.toggle()" mat-fab color="accent">
    <mat-icon>shopping_cart</mat-icon>
  </button>
</div>
<mat-drawer-container autosize>
  <mat-drawer #drawer mode="side" position="end" pDroppable (onDrop)="onDrop()">
    <mat-nav-list>
      <div
        class="d-flex align-items-center m-3 border-bottom justify-content-center"
      >
        <mat-icon>shopping_cart</mat-icon>
        <h2 class="m-3 mt-1 empty-cart-text">Mi carrito</h2>
      </div>

      @if (this.currentCart.totalItems === 0) {
      <div class="text-center">
        <h3 class="empty-cart-text">Tu carrito está vacío.</h3>
        <p class="text-secondary">Te ayudamos a buscar lo que encontrás.</p>
        <a href="">Ver productos.</a>
      </div>
      }

      <app-cart-items></app-cart-items>
      @if (this.currentCart.totalItems > 0) {
      <div class="total w-100">
        <div class="d-flex justify-content-center mt-3">
          <div class="input-group w-75">
            <input
              type="text"
              class="form-control"
              placeholder="Código postal"
              aria-label="Código postal"
              aria-describedby="button-addon2"
            />
            <button
              mat-raised-button
              class="btn text-white bg-dark btn-outline-secondary"
              type="button"
              id="button-addon2"
            >
              Calcular envío
            </button>
          </div>
        </div>
        <div
          class="d-flex flex-column align-items-center w-100 justify-content-around mt-1"
        >
          <div
            class="d-flex flex-column w-75 align-items-center justify-content-between"
          >
            <div class="w-100 text-secondary">
              <a href="" style="font-size: 13px"><b>Ver detalle</b></a>
            </div>
            <div class="d-flex w-100 justify-content-between text-black">
              <h5 class="">TOTAL</h5>
              <h4 class="">${{ this.currentCart.finalPrice }}</h4>
            </div>
          </div>
          <button
            mat-raised-button
            class="btn bg-dark text-white w-75"
            color="accent"
            (click)="checkoutEvent(drawer)"
          >
            Finalizar mi compra
          </button>
        </div>
      </div>
      }
    </mat-nav-list>
  </mat-drawer>

  <mat-drawer-content
    style="min-height: 100vh; max-width: 100wh; background-color: white"
  >
    <app-header></app-header>
    <router-outlet> </router-outlet>
    <app-footer></app-footer>
  </mat-drawer-content>
</mat-drawer-container>
